# SkyboxPlaneGroundシェーダー

Vketや落選マーケット用に作成されたシェーダーです。天球のシェーダーですが、球場のスカイボックスではなく、地面を追加したシェーダーです。

このシェーダーを使うと、1枚の360度パノラマ画像から半球状のドームと円状の地面を得られるため、より空間の広がりを演出することができます。

今回の落選マーケットで、WhiteAtelierのブースで実際に使用しています。4m x 5m x 4mのブースサイズに、自分の世界観は収められない！と考え、このようなシェーダーを書きました。

# 機能・設定項目

## 適用するオブジェクト
オブジェクトのトランスフォームは、基本的に回転、スケール共に基本値にします。オブジェクト空間で計算がされるため、位置、回転、スケールなどのトランスフォームは
天球の見え方に大きく影響します。

unityのBoxなどは原点を動かすことができないため、地面の高さはGround Y Offsetの値を調節してください。
また、オブジェクトをモデリングソフトで作成する場合は、原点がスカイボックスの原点（中央）になることを意識してモデリングしてください。

## パラメータ

- Culling
    - カリング設定。デフォルトではFrontになっています。
    - オブジェクトをモデリングソフトで作成する場合は、法線を内側に向け、Cull Backにしても大丈夫です。

- SDR Skybox Texture (Panoramic RGB)
    - このシェーダーでは360度パノラマ画像にのみ対応しています。
    - また、Unlitシェーダーであるため、HDR画像には対応していません。
    - TextureのImport設定から、Wrap ModeをRepeatにしてください。（普通はデフォルトでその設定です。）
    - 撮影地点から近い場所に、柵や草木などの立体物がない、平坦なパノラマ画像が最適です。

- Multiply Dome Color
    - 天球の乗算色です。基本は白色です。

- Horizontal Rotation (degree)
    - 水平方向の回転オフセットです。

- Dome Radius
    - 天球の半径を指定します。

- Dome Image Shot Height
    - パノラマ写真を撮影したときの、地面からのカメラの高さを入力します。
    - Dome Radiusと連動して見え方が変わるので、足元付近のテクスチャを確認しながら調整します。

- Ground Y Offset
    - Y方向下向きへのオフセット値です。基本、オブジェクトの原点が、スカイドームの原点になります。
    - 地面下にカメラがめり込んだ時の動作は正確でないので、注意してください。

- Alpha Blending Sub Texture
    - アルファ値で上書き合成されるサブテクスチャです。
    - このテクスチャは、オブジェクトの元のUVに従って張り付けられます。

- Multiply Sub Texture Color
    - サブテクスチャの乗算カラーです。
    - こちらは基本的に透過色に設定します。

- Ambient Occlusion
    - アンビエントオクルージョン用のマップです。
    - UVはサブテクスチャと同じく、オブジェクトの元のUVによって張り付けられます。
    - テクスチャは乗算で合成されます。

- Ambient Occlusion Color
    - アンビエントオクルージョン用の乗算カラーです。
    - こちらは基本的に白色に設定します。

- Ambient Occlusion Strength
    - アンビエントオクルージョンの強さを指定します。
    - 0にするほど効果が弱まります。

### SkyboxPlaneGroundCylinderの機能

シリンダー状のレイヤー機能です。遠近感を演出するために、３枚のシリンダー状のレイヤーを用意しました。
レイヤーは0から順に、奥から描写されます。アルファ画像も使用できますが、描写順に注意してください。

以下Xには、それぞれ0,1,2の数字が入ります。

- Enable Cylinder LayerX
    - レイヤーを有効にします。
    - このチェックボックスをONにすることで、機能を使用することができます。

- LX Cylinder Texture
    - シリンダーに張り付けるためのテクスチャです。
    - アルファ画像に対応しています。

- LX Cylinder Tiling & Offset
    - シリンダーレイヤのテクスチャタイリングとオフセットを設定します。

- LX Cylinder Color
    - シリンダーレイヤーのテクスチャに対する乗算カラーです。
    - デフォルトだと白色になっています。

- LX Cylinder Radius
    - シリンダーの半径です。

- LX Cylinder Height
    - シリンダーの高さです。

# 同梱物

- シェーダー
- サンプルパノラマテクスチャJPG 2枚(HDRI Havenより、CC0ライセンス)
- サンプルテクスチャ・マテリアル
- サンプルシーン

# 利用規約

サンプルを除く、シェーダーファイル(.shader)、シェーダーインクルードファイル(.cginc)を、営利・非営利問わず無断で再配布・再販売・シェーダーコードの共有を禁止します。

VRChatのワールドギミックとしての使用を想定していますが、第三者がシェーダーコードを自由に閲覧できない状態に限り、他コンテンツでの利用も許可します。

コードの解析・改変などは制限されていません。

この利用規約は予告なく変更されることがあります。

こちらの商品を購入・ダウンロードした段階で、こちらの利用規約に同意されたものとみなします。

# 更新

2019/09/29 公開
